{% extends 'base.html' %}
{% block content %}
<h1>Utilisateurs</h1>
<form method="get" class="filter-form">
    <!-- Filter inputs remain the same -->
</form>

{% if not users %}
    <div class="empty-state">Aucun utilisateur trouvé</div>
{% else %}
    <form method="get">
        <label><input type="checkbox" name="bots" value="1" {% if filters.get('bots')=='1' %}checked{% endif %}> Bots</label>
        <label><input type="checkbox" name="ips" value="1" {% if filters.get('ips')=='1' %}checked{% endif %}> IPs</label>
        <label><input type="checkbox" name="blocked" value="1" {% if filters.get('blocked')=='1' %}checked{% endif %}> Bloqués</label>
        <label>Actifs dans les derniers jours: <input type="number" name="active_days" value="{{ filters.get('active_days','') }}"></label>
        <label>Article: <input type="text" name="article" value="{{ filters.get('from_article','') }}"></label>
        <button type="submit">Filtrer</button>
    </form>
    <table>
        <thead>
            <tr><th>ID</th><th>Nom</th><th>IPs</th><th>Bots</th><th>Bloqués</th><th>Contributions</th><th>Article</th></tr>
        </thead>
        <tbody>
        {% for u in users %}
            <tr>
                <td>{{ u['id'] }}</td>
                <td>
                    <a href="https://fr.wikiscan.org/?menu=userstats&user={{ u['username'] }}" 
                       target="_blank"
                       rel="noopener noreferrer">
                        {{ u['username'] }}
                    </a>
                </td>
                <td>{{ '✓' if u['is_ip'] }}</td>
                <td>{{ '✓' if u['is_bot'] }}</td>
                <td>{{ '✓' if u['is_blocked'] }}</td>
                <td>{{ u['contributions'] }}</td>
                <td>{{ u['from_article'] }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
{% endblock %}